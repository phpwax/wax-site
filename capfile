require 'rubygems'
require 'obbistrano'

set :application,  "app_name"
set :deploy_to,    "."
set :build_to,     "."
set :newdeploy,    "yes"
set :repository,   "git@github.com:oneblackbear/#{application}.git"
set :password,     "password"
set :use_composer, true

task :live do
  role :web,        "example.com"
  role :host,       "example.com"
  set :user,        "#{application}"
  set :branch,      "master"
end

task :beta do
  role :web,        "beta.example.com"
  role :host,       "beta.example.com"
  set :user,        "#{application}beta"
  set :branch,      $1 if `git branch` =~ /\* (\S+)\s/m #will deploy the current branch, make sure you have pushed this to your remote repository first
end
